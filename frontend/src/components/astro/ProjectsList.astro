---
import Skills from '@/components/Skills';
import { Button } from '@/components/ui/button';
import { fetchProjects } from '@/services/project';
import type { Project } from '@/types/project-type';
import { getResourceUrl } from '@/utils/utils';
import { ArrowRight } from 'lucide-react';

const projects = await fetchProjects();
---

<div class='grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-12'>
  {
    projects.map((project: Project) => (
      <div>
        <img
          src={getResourceUrl(project?.image)}
          alt='project image'
          class='w-full h-auto object-cover rounded-lg'
          style={{ aspectRatio: '16/9' }}
        />

        <h3 class='line-clamp-1 font-bold mb-1 lg:text-2xl md:text-xl sm:text-lg mt-4'>
          {project.title}
        </h3>
        <p class='line-clamp-2 text-muted-foreground mt-0 lg:text-base md:text-sm sm:text-sm'>
          {project.short_description}
        </p>
        <div class='mt-4'>
          <Skills skillsString={project.skills} limit={4} variant={'outline'} />
        </div>
        <a href={`/project/${project.id}`}>
          <Button variant='link' client:visible size='sm' className='mt-4 p-0'>
            Read More
            <ArrowRight />
          </Button>
        </a>
      </div>
    ))
  }
</div>
